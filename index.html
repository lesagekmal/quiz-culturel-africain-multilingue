<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Quiz Culture Africaine - Testez vos connaissances">
    <title>Quiz Culture Africaine</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üåç</text></svg>">
    
    <!-- Vercel Web Analytics -->
    <script>
        window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>
    
    <style>
        /* VARIABLES */
        :root {
            --primary: #e63946;
            --secondary: #1d3557;
            --accent: #f4a261;
            --success: #2a9d8f;
            --light: #f1faee;
            --radius: 12px;
            --shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        /* RESET */
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
            padding: 15px;
            display: flex;
            flex-direction: column;
        }
        
        /* CONTAINERS */
        .container { 
            max-width: 900px; 
            margin: 0 auto; 
            width: 100%;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        .screen { 
            display: none; 
            flex: 1;
            flex-direction: column;
        }
        .screen.active { 
            display: flex; 
            animation: fadeIn 0.5s;
            flex-direction: column;
        }
        @keyframes fadeIn { 
            from { opacity: 0; transform: translateY(20px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        
        /* HEADER */
        .header { 
            text-align: center; 
            margin-bottom: 20px; 
            padding: 25px 20px;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: var(--radius);
            border: 1px solid rgba(255,255,255,0.2);
        }
        .header h1 { 
            font-size: 2.2rem; 
            margin-bottom: 10px; 
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3); 
        }
        .header p { 
            font-size: 1rem; 
            opacity: 0.9; 
        }
        
        /* LANGUE SWITCHER */
        .lang-switcher {
            position: fixed;
            top: 15px;
            right: 15px;
            display: flex;
            gap: 8px;
            z-index: 1000;
        }
        .lang-btn {
            padding: 8px 15px;
            border: 2px solid white;
            background: rgba(255,255,255,0.1);
            color: white;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            backdrop-filter: blur(10px);
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        .lang-btn.active { background: white; color: var(--secondary); }
        .lang-btn:hover { transform: scale(1.05); }
        
        /* CAT√âGORIES */
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 12px;
            margin: 20px 0;
            flex: 1;
            overflow-y: auto;
            padding-right: 5px;
            max-height: 60vh;
        }

        .categories-grid::-webkit-scrollbar {
            width: 6px;
        }
        .categories-grid::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }
        .categories-grid::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 3px;
        }

        .category-card {
            background: linear-gradient(145deg, rgba(255,255,255,0.15), rgba(255,255,255,0.05));
            padding: 18px 12px;
            border-radius: var(--radius);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            min-height: 110px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .category-card:hover { 
            transform: translateY(-5px);
            box-shadow: var(--shadow);
            background: linear-gradient(145deg, rgba(255,255,255,0.2), rgba(255,255,255,0.1));
        }
        .category-icon { 
            font-size: 2rem; 
            margin-bottom: 8px;
            filter: drop-shadow(1px 1px 3px rgba(0,0,0,0.3));
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .category-card h3 { 
            font-size: 0.95rem; 
            font-weight: 600;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            line-height: 1.3;
        }
        
        /* BOUTONS */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            text-decoration: none;
            white-space: nowrap;
        }
        .btn-primary { 
            background: linear-gradient(to right, #ff6b6b, #ff8e53);
            color: white;
            box-shadow: 0 6px 20px rgba(255,107,107,0.3);
        }
        .btn-primary:hover { 
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255,107,107,0.4);
        }
        .btn-secondary { 
            background: rgba(255,255,255,0.15);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
        }
        .btn-secondary:hover { 
            background: rgba(255,255,255,0.25);
            transform: translateY(-3px);
        }
        
        /* QUIZ SCREEN */
        .quiz-screen {
            display: flex;
            flex-direction: column;
            flex: 1;
            min-height: 0;
        }
        
        .quiz-header {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: var(--radius);
            margin-bottom: 15px;
            border: 1px solid rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }
        
        .quiz-info {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        /* TIMER */
        .timer-container {
            position: relative;
            width: 60px;
            height: 60px;
            flex-shrink: 0;
        }
        .timer-svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }
        .timer-circle-bg {
            fill: none;
            stroke: rgba(255,255,255,0.2);
            stroke-width: 4;
        }
        .timer-circle-progress {
            fill: none;
            stroke: #ff6b6b;
            stroke-width: 4;
            stroke-linecap: round;
            stroke-dasharray: 188;
            stroke-dashoffset: 0;
            transition: stroke-dashoffset 1s linear;
        }
        .timer-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.3rem;
            font-weight: bold;
            color: white;
        }
        
        /* QUESTION */
        .question-container {
            background: rgba(255,255,255,0.1);
            padding: 20px 15px;
            border-radius: var(--radius);
            margin-bottom: 15px;
            border: 1px solid rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 120px;
            flex-shrink: 0;
        }
        #question-text { 
            font-size: 1.3rem; 
            line-height: 1.4;
            font-weight: 600;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
        }
        
        /* R√âPONSES */
        .answers-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-bottom: 15px;
            flex: 1;
            overflow-y: auto;
            padding-right: 5px;
            min-height: 0;
        }
        
        .answer-btn {
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: var(--radius);
            font-size: 1rem;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 12px;
            color: white;
            backdrop-filter: blur(10px);
            min-height: 60px;
        }
        .answer-btn:hover { 
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }
        .answer-btn.correct { 
            background: rgba(46, 204, 113, 0.3);
            border-color: #2ecc71;
            color: #2ecc71;
        }
        .answer-btn.wrong { 
            background: rgba(231, 76, 60, 0.3);
            border-color: #e74c3c;
            color: #e74c3c;
        }
        .answer-letter {
            background: rgba(255,255,255,0.2);
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            font-weight: bold;
            flex-shrink: 0;
        }
        .answer-btn.correct .answer-letter { background: #2ecc71; }
        .answer-btn.wrong .answer-letter { background: #e74c3c; }
        
        /* BOUTON NEXT */
        .next-btn-container {
            padding: 15px 0;
            background: linear-gradient(transparent, rgba(0,0,0,0.3));
            margin-top: auto;
            flex-shrink: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        /* PROGRESS BAR */
        .progress-bar {
            height: 6px;
            background: rgba(255,255,255,0.2);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 8px;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #ff6b6b, #ff8e53);
            border-radius: 3px;
            transition: width 0.5s;
        }
        
        /* R√âSULTATS */
        .results-container {
            background: rgba(255,255,255,0.1);
            padding: 30px 20px;
            border-radius: var(--radius);
            margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            text-align: center;
        }
        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: conic-gradient(#2ecc71 0% 0%, rgba(255,255,255,0.1) 0% 100%);
            margin: 25px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            border: 6px solid rgba(255,255,255,0.2);
        }
        .score-circle::before {
            content: '';
            position: absolute;
            width: 120px;
            height: 120px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
        }
        #score-percent { 
            position: relative; 
            z-index: 1; 
            font-size: 2.5rem; 
            font-weight: bold; 
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        /* FOOTER */
        .footer {
            text-align: center;
            margin-top: auto;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.2);
            color: rgba(255,255,255,0.8);
            font-size: 0.85rem;
            padding-bottom: 10px;
            flex-shrink: 0;
            width: 100%;
        }
        .footer strong { color: var(--accent); }
        
        /* BOUTONS DE PARTAGE */
        .share-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }
        .share-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        .share-btn:hover {
            transform: scale(1.1);
            background: rgba(255,255,255,0.2);
        }
        
        /* MODAL DONATIONS */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: rgba(255,255,255,0.95);
            color: #333;
            padding: 30px;
            border-radius: var(--radius);
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .donation-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 20px 0;
        }
        
        .donation-btn {
            padding: 15px;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .donation-btn:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }
        
        .donation-btn.amount-500 { border-color: #2ecc71; color: #2ecc71; }
        .donation-btn.amount-1000 { border-color: #3498db; color: #3498db; }
        .donation-btn.amount-2000 { border-color: #9b59b6; color: #9b59b6; }
        .donation-btn.amount-5000 { border-color: #e74c3c; color: #e74c3c; }
        .donation-btn.amount-10000 { border-color: #f1c40f; color: #f1c40f; }
        .donation-btn.amount-20000 { border-color: #e67e22; color: #e67e22; }
        
        /* SECTION DONS DANS R√âSULTATS */
        .donation-section {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: var(--radius);
            margin: 20px 0;
            border: 1px solid rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
        }
        
        /* RESPONSIVE */
        @media (min-width: 768px) {
            body { padding: 20px; }
            .header { padding: 30px; margin-bottom: 30px; }
            .header h1 { font-size: 2.5rem; }
            .header p { font-size: 1.1rem; }
            
            .categories-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
                max-height: none;
            }
            
            .category-card { min-height: 130px; padding: 20px 15px; }
            .category-icon { font-size: 2.2rem; }
            .category-card h3 { font-size: 1.05rem; }
            
            .quiz-header { padding: 20px; margin-bottom: 20px; }
            .question-container { padding: 25px 20px; min-height: 140px; }
            #question-text { font-size: 1.5rem; }
            
            .answers-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            
            .answer-btn { padding: 18px 20px; }
            .answer-letter { width: 40px; height: 40px; }
            
            .timer-container { width: 70px; height: 70px; }
            .timer-text { font-size: 1.5rem; }
            
            .donation-options {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        @media (min-width: 992px) {
            .categories-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- SWITCH LANGUE -->
        <div class="lang-switcher">
            <button class="lang-btn active" onclick="switchLanguage('fr')">üá´üá∑ FR</button>
            <button class="lang-btn" onclick="switchLanguage('en')">üá¨üáß EN</button>
        </div>
        
        <!-- √âCRAN ACCUEIL -->
        <div id="home-screen" class="screen active">
            <div class="header">
                <h1 id="title">üåç Quiz Culture Africaine</h1>
                <p id="subtitle">Testez vos connaissances sur le continent africain</p>
                <div style="margin-top: 20px;">
                    <button class="btn btn-primary" onclick="installPWA()" id="install-btn" style="display: none;">
                        <i class="fas fa-download"></i> <span id="install-text">Installer l'app</span>
                    </button>
                </div>
            </div>
            
            <h2 id="choose-category" style="text-align: center; margin-bottom: 15px; font-size: 1.3rem;">Choisissez une cat√©gorie :</h2>
            
            <div class="categories-grid" id="categories-container">
                <!-- Cat√©gories charg√©es dynamiquement -->
            </div>
            
            <div style="text-align: center; margin: 20px 0;">
                <button class="btn btn-primary" onclick="startQuiz('mix')">
                    <i class="fas fa-random"></i> <span id="mix-mode">Mode Mix - Toutes cat√©gories</span>
                </button>
            </div>
            
            <!-- BOUTONS DE PARTAGE -->
            <div class="share-buttons">
                <button class="share-btn" onclick="shareApp()" title="Partager l'application">
                    <i class="fas fa-share-alt"></i>
                </button>
                <button class="share-btn" onclick="showDonations()" title="Soutenir le projet">
                    <i class="fas fa-heart"></i>
                </button>
            </div>
            
            <p style="text-align: center; color: rgba(255,255,255,0.8); font-size: 0.9rem; margin-top: 10px;" id="game-info">
                <i class="fas fa-question-circle"></i> 10 questions ‚Ä¢ 
                <i class="fas fa-clock"></i> Timer 20s ‚Ä¢ 
                <i class="fas fa-star"></i> Score final
            </p>
        </div>
        
        <!-- √âCRAN QUIZ -->
        <div id="quiz-screen" class="screen">
            <div class="quiz-header">
                <div class="quiz-info">
                    <div style="display: flex; justify-content: space-between; align-items: center; gap: 10px;">
                        <span id="question-counter" style="font-size: 0.95rem; font-weight: bold;">Question 1/10</span>
                        <span id="category-display" class="btn-secondary" style="font-size: 0.8rem; padding: 6px 12px;">Cat√©gorie</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill" style="width: 10%"></div>
                    </div>
                </div>
                <div class="timer-container">
                    <svg class="timer-svg" viewBox="0 0 100 100">
                        <circle class="timer-circle-bg" cx="50" cy="50" r="30"></circle>
                        <circle class="timer-circle-progress" cx="50" cy="50" r="30"></circle>
                    </svg>
                    <div class="timer-text" id="timer">20</div>
                </div>
            </div>
            
            <div class="question-container">
                <h2 id="question-text">Chargement de la question...</h2>
            </div>
            
            <div class="answers-grid" id="answers-container">
                <!-- R√©ponses g√©n√©r√©es dynamiquement -->
            </div>
            
            <div class="next-btn-container">
                <button class="btn btn-secondary" onclick="goHome()">
                    <i class="fas fa-home"></i> <span id="abandon-text">Abandonner</span>
                </button>
                <button class="btn btn-primary" id="next-btn" onclick="nextQuestion()" disabled style="width: auto; min-width: 150px;">
                    <span id="next-text">Suivant</span> <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
        
        <!-- √âCRAN R√âSULTATS -->
        <div id="results-screen" class="screen">
            <div class="results-container">
                <h2 id="results-title" style="font-size: 1.8rem; margin-bottom: 15px;">R√©sultats du Quiz</h2>
                
                <div class="score-circle">
                    <span id="score-percent">0%</span>
                </div>
                
                <p id="score-text" style="font-size: 1.3rem; margin: 15px 0;">Score : <span id="score-value" style="color: var(--accent); font-weight: bold;">0</span>/10</p>
                
                <div id="performance-message" style="font-size: 1rem; margin: 20px 0; padding: 15px; background: rgba(255,255,255,0.1); border-radius: var(--radius);">
                    <!-- Message de performance -->
                </div>
                
                <!-- BOUTON PARTAGE SCORE -->
                <div style="text-align: center; margin: 20px 0;">
                    <button class="btn btn-primary" onclick="shareScore()" style="background: linear-gradient(to right, #25D366, #128C7E);">
                        <i class="fas fa-share-alt"></i> <span id="share-score-text">Partager mon score</span>
                    </button>
                </div>
                
                <!-- SECTION DONS -->
                <div class="donation-section">
                    <h3 style="color: white; margin-bottom: 15px;" id="donation-title-results">Soutenir le projet üåç</h3>
                    <p style="color: rgba(255,255,255,0.9); margin-bottom: 15px; line-height: 1.5;" id="donation-text-results">
                        Votre soutien nous aide √† maintenir et am√©liorer cette application √©ducative. Chaque contribution, m√™me modeste, fait une grande diff√©rence !
                    </p>
                    
                    <div class="donation-options">
                        <button class="donation-btn amount-500" onclick="initiateDonation(500)">500 F CFA</button>
                        <button class="donation-btn amount-1000" onclick="initiateDonation(1000)">1 000 F CFA</button>
                        <button class="donation-btn amount-2000" onclick="initiateDonation(2000)">2 000 F CFA</button>
                        <button class="donation-btn amount-5000" onclick="initiateDonation(5000)">5 000 F CFA</button>
                        <button class="donation-btn amount-10000" onclick="initiateDonation(10000)">10 000 F CFA</button>
                        <button class="donation-btn amount-20000" onclick="initiateDonation(20000)">20 000 F CFA</button>
                    </div>
                    
                    <div style="margin-top: 15px;">
                        <p style="color: rgba(255,255,255,0.9); margin-bottom: 10px; font-size: 0.9rem;" id="donation-custom-results">Ou entrez un montant personnalis√© :</p>
                        <div style="display: flex; gap: 10px;">
                            <input type="number" id="custom-amount-results" placeholder="Montant en F CFA" min="100" max="1000000" style="flex: 1; padding: 12px; border: 2px solid rgba(255,255,255,0.2); border-radius: 10px; font-size: 1rem; background: rgba(255,255,255,0.1); color: white;">
                            <button class="btn btn-primary" onclick="initiateCustomDonationResults()" id="donation-custom-btn-results" style="white-space: nowrap;">Valider</button>
                        </div>
                    </div>
                    
                    <p style="margin-top: 15px; color: rgba(255,255,255,0.8); font-size: 0.8rem; text-align: center;" id="donation-info-results">
                        üí≥ Paiement s√©curis√© via FedaPay (Mobile Money & Cartes Internationales)
                    </p>
                </div>
                
                <!-- BOUTONS D'ACTION -->
                <div style="display: flex; justify-content: center; gap: 15px; margin: 30px 0;">
                    <button class="btn btn-secondary" onclick="playAgain()">
                        <i class="fas fa-redo"></i> <span id="play-again">Rejouer</span>
                    </button>
                    <button class="btn btn-primary" onclick="goHome()">
                        <i class="fas fa-home"></i> <span id="home-text">Accueil</span>
                    </button>
                </div>
            </div>
            
            <footer class="footer">
                <p>&copy; 2026 <strong>MAX TECH</strong>. Tous droits r√©serv√©s.</p>
                <p id="footer-text" style="margin-top: 5px;">Quiz Culture Africaine - Application √©ducative</p>
                <p style="margin-top: 5px; font-size: 0.8rem;">Contact: lesagekmal@gmail.com</p>
            </footer>
        </div>
    </div>
    
    <!-- MODAL DONATIONS -->
    <div id="donation-modal" class="modal">
        <div class="modal-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 style="color: #333;" id="donation-title">Soutenir le projet üåç</h2>
                <button onclick="closeDonationModal()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #666;">&times;</button>
            </div>
            
            <div style="margin-bottom: 20px;">
                <p id="donation-subtitle" style="color: #666; line-height: 1.5;">
                    Votre soutien nous aide √† maintenir et am√©liorer cette application √©ducative. Les fonds collect√©s servent √† :
                </p>
                <ul style="color: #666; margin: 15px 0; padding-left: 20px;">
                    <li id="donation-item-1">üéØ Achat et renouvellement du nom de domaine</li>
                    <li id="donation-item-2">üíæ H√©bergement et maintenance des serveurs</li>
                    <li id="donation-item-3">‚ö° D√©veloppement de nouvelles fonctionnalit√©s</li>
                    <li id="donation-item-4">üìö Recherche et ajout de nouvelles questions</li>
                    <li id="donation-item-5">üì± Am√©lioration de l'exp√©rience utilisateur</li>
                    <li id="donation-item-6">üåç Promotion de la culture africaine</li>
                </ul>
                <p id="donation-conclusion" style="color: #333; font-weight: bold;">
                    Chaque contribution, m√™me modeste, fait une grande diff√©rence !
                </p>
            </div>
            
            <h3 id="donation-choose" style="margin-bottom: 15px; color: #333;">Choisissez un montant :</h3>
            
            <div class="donation-options">
                <button class="donation-btn amount-500" onclick="initiateDonation(500)">500 F CFA</button>
                <button class="donation-btn amount-1000" onclick="initiateDonation(1000)">1 000 F CFA</button>
                <button class="donation-btn amount-2000" onclick="initiateDonation(2000)">2 000 F CFA</button>
                <button class="donation-btn amount-5000" onclick="initiateDonation(5000)">5 000 F CFA</button>
                <button class="donation-btn amount-10000" onclick="initiateDonation(10000)">10 000 F CFA</button>
                <button class="donation-btn amount-20000" onclick="initiateDonation(20000)">20 000 F CFA</button>
            </div>
            
            <div style="margin-top: 20px;">
                <p id="donation-custom" style="color: #666; margin-bottom: 10px;">Ou entrez un montant personnalis√© :</p>
                <div style="display: flex; gap: 10px;">
                    <input type="number" id="custom-amount" placeholder="Montant en F CFA" min="100" max="1000000" style="flex: 1; padding: 12px; border: 2px solid #dee2e6; border-radius: 10px; font-size: 1rem;">
                    <button class="btn btn-primary" onclick="initiateCustomDonation()" id="donation-custom-btn">Valider</button>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn btn-secondary" onclick="closeDonationModal()">
                    <span id="close-donation-text">Fermer</span>
                </button>
            </div>
            
            <p style="margin-top: 20px; color: #666; font-size: 0.8rem; text-align: center;" id="donation-info">
                üí≥ Paiement s√©curis√© via FedaPay (Mobile Money & Cartes Internationales)
            </p>
        </div>
    </div>
    
    <!-- JAVASCRIPT COMPLET -->
    <script>
        // CONFIGURATION
        const CONFIG = {
            QUESTIONS_PER_QUIZ: 10,
            TIMER_DURATION: 20,
            AUTO_NEXT_DELAY: 1000,
            
            // Cat√©gories fixes - EXACTEMENT comme dans les fichiers JSON
            CATEGORIES: [
                "Histoire africaine",
                "G√©ographie et pays", 
                "Langues et ethnies",
                "Musique et danse",
                "Cuisine africaine",
                "Litt√©rature et philosophie",
                "Sport et jeux traditionnels",
                "Religion et spiritualit√©",
                "Personnalit√©s contemporaines",
                "Art et artisanat"
            ],
            
            // Traductions des cat√©gories pour l'anglais
            CATEGORY_TRANSLATIONS: {
                "fr": {
                    "Histoire africaine": "Histoire africaine",
                    "G√©ographie et pays": "G√©ographie et pays",
                    "Langues et ethnies": "Langues et ethnies",
                    "Musique et danse": "Musique et danse",
                    "Cuisine africaine": "Cuisine africaine",
                    "Litt√©rature et philosophie": "Litt√©rature et philosophie",
                    "Sport et jeux traditionnels": "Sport et jeux traditionnels",
                    "Religion et spiritualit√©": "Religion et spiritualit√©",
                    "Personnalit√©s contemporaines": "Personnalit√©s contemporaines",
                    "Art et artisanat": "Art et artisanat"
                },
                "en": {
                    "Histoire africaine": "African History",
                    "G√©ographie et pays": "Geography and Countries",
                    "Langues et ethnies": "Languages and Ethnicities",
                    "Musique et danse": "Music and Dance",
                    "Cuisine africaine": "African Cuisine",
                    "Litt√©rature et philosophie": "Literature and Philosophy",
                    "Sport et jeux traditionnels": "Sports and Traditional Games",
                    "Religion et spiritualit√©": "Religion and Spirituality",
                    "Personnalit√©s contemporaines": "Contemporary Personalities",
                    "Art et artisanat": "Art and Craftsmanship"
                }
            },
            
            // Ic√¥nes pour chaque cat√©gorie
            CATEGORY_ICONS: {
                "Histoire africaine": "fas fa-landmark",
                "G√©ographie et pays": "fas fa-globe-africa",
                "Langues et ethnies": "fas fa-comments",
                "Musique et danse": "fas fa-music",
                "Cuisine africaine": "fas fa-utensils",
                "Litt√©rature et philosophie": "fas fa-book-open",
                "Sport et jeux traditionnels": "fas fa-futbol",
                "Religion et spiritualit√©": "fas fa-pray",
                "Personnalit√©s contemporaines": "fas fa-star",
                "Art et artisanat": "fas fa-palette"
            },
            
            LANGUAGES: {
                fr: {
                    title: "üåç Quiz Culture Africaine",
                    subtitle: "Testez vos connaissances sur le continent africain",
                    chooseCategory: "Choisissez une cat√©gorie :",
                    mixMode: "Mode Mix - Toutes cat√©gories",
                    gameInfo: "10 questions ‚Ä¢ Timer 20s ‚Ä¢ Score final",
                    nextText: "Suivant",
                    resultsTitle: "R√©sultats du Quiz",
                    scoreText: "Score : ",
                    playAgain: "Rejouer",
                    homeText: "Accueil",
                    abandonText: "Abandonner",
                    footerText: "Quiz Culture Africaine - Application √©ducative",
                    installText: "Installer l'app",
                    shareText: "Partager",
                    shareScoreText: "Partager mon score",
                    donateText: "Faire un don",
                    closeDonationText: "Fermer",
                    donationTitle: "Soutenir le projet üåç",
                    donationSubtitle: "Votre soutien nous aide √† maintenir et am√©liorer cette application √©ducative. Les fonds collect√©s servent √† :",
                    donationItem1: "üéØ Achat et renouvellement du nom de domaine",
                    donationItem2: "üíæ H√©bergement et maintenance des serveurs",
                    donationItem3: "‚ö° D√©veloppement de nouvelles fonctionnalit√©s",
                    donationItem4: "üìö Recherche et ajout de nouvelles questions",
                    donationItem5: "üì± Am√©lioration de l'exp√©rience utilisateur",
                    donationItem6: "üåç Promotion de la culture africaine",
                    donationConclusion: "Chaque contribution, m√™me modeste, fait une grande diff√©rence !",
                    donationChoose: "Choisissez un montant :",
                    donationCustom: "Ou entrez un montant personnalis√© :",
                    donationInfo: "üí≥ Paiement s√©curis√© via FedaPay (Mobile Money & Cartes Internationales)",
                    donationCustomBtn: "Valider",
                    donationTitleResults: "Soutenir le projet üåç",
                    donationTextResults: "Votre soutien nous aide √† maintenir et am√©liorer cette application √©ducative. Chaque contribution, m√™me modeste, fait une grande diff√©rence !",
                    donationCustomResults: "Ou entrez un montant personnalis√© :",
                    donationInfoResults: "üí≥ Paiement s√©curis√© via FedaPay (Mobile Money & Cartes Internationales)",
                    performanceMessages: [
                        { min: 0, max: 3, message: "Vous pouvez faire mieux ! Continuez √† apprendre sur l'Afrique." },
                        { min: 4, max: 6, message: "Bon score ! Vous avez de bonnes connaissances africaines." },
                        { min: 7, max: 9, message: "Excellent ! Vous √™tes un vrai connaisseur de la culture africaine." },
                        { min: 10, max: 10, message: "Parfait ! Vous ma√Ætrisez parfaitement la culture africaine !" }
                    ]
                },
                en: {
                    title: "üåç African Culture Quiz",
                    subtitle: "Test your knowledge about the African continent",
                    chooseCategory: "Choose a category:",
                    mixMode: "Mix Mode - All categories",
                    gameInfo: "10 questions ‚Ä¢ 20s timer ‚Ä¢ Final score",
                    nextText: "Next",
                    resultsTitle: "Quiz Results",
                    scoreText: "Score: ",
                    playAgain: "Play Again",
                    homeText: "Home",
                    abandonText: "Abandon",
                    footerText: "African Culture Quiz - Educational App",
                    installText: "Install App",
                    shareText: "Share",
                    shareScoreText: "Share my score",
                    donateText: "Donate",
                    closeDonationText: "Close",
                    donationTitle: "Support the Project üåç",
                    donationSubtitle: "Your support helps us maintain and improve this educational app. The funds collected are used for:",
                    donationItem1: "üéØ Domain name purchase and renewal",
                    donationItem2: "üíæ Server hosting and maintenance",
                    donationItem3: "‚ö° Development of new features",
                    donationItem4: "üìö Research and addition of new questions",
                    donationItem5: "üì± Improvement of user experience",
                    donationItem6: "üåç Promotion of African culture",
                    donationConclusion: "Every contribution, even a modest one, makes a big difference!",
                    donationChoose: "Choose an amount:",
                    donationCustom: "Or enter a custom amount:",
                    donationInfo: "üí≥ Secure payment via FedaPay (Mobile Money & International Cards)",
                    donationCustomBtn: "Validate",
                    donationTitleResults: "Support the Project üåç",
                    donationTextResults: "Your support helps us maintain and improve this educational app. Every contribution, even a modest one, makes a big difference!",
                    donationCustomResults: "Or enter a custom amount:",
                    donationInfoResults: "üí≥ Secure payment via FedaPay (Mobile Money & International Cards)",
                    performanceMessages: [
                        { min: 0, max: 3, message: "You can do better! Keep learning about Africa." },
                        { min: 4, max: 6, message: "Good score! You have good knowledge of Africa." },
                        { min: 7, max: 9, message: "Excellent! You are a true connoisseur of African culture." },
                        { min: 10, max: 10, message: "Perfect! You master African culture perfectly!" }
                    ]
                }
            }
        };
        
        // √âTAT DE L'APPLICATION
        const STATE = {
            currentLang: 'fr',
            currentCategory: null,
            currentQuestion: 0,
            score: 0,
            questions: [],
            timer: null,
            timeLeft: CONFIG.TIMER_DURATION,
            selectedAnswer: null,
            quizCompleted: false,
            allQuestions: { fr: [], en: [] },
            deferredPrompt: null,
            autoNextTimeout: null
        };
        
        // FONCTIONS UTILITAIRES
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        function updateTimerDisplay() {
            const timerElement = document.getElementById('timer');
            const progressElement = document.querySelector('.timer-circle-progress');
            
            if (timerElement && progressElement) {
                timerElement.textContent = STATE.timeLeft;
                
                const circumference = 188;
                const progress = STATE.timeLeft / CONFIG.TIMER_DURATION;
                const offset = circumference - (progress * circumference);
                progressElement.style.strokeDashoffset = offset;
            }
        }
        
        // CHARGEMENT DES QUESTIONS
        async function loadQuestions() {
            try {
                const filename = STATE.currentLang === 'fr' ? 'questions-fr.json' : 'questions-eng.json';
                const response = await fetch(filename);
                
                if (response.ok) {
                    STATE.allQuestions[STATE.currentLang] = await response.json();
                    console.log(`Questions ${STATE.currentLang} charg√©es: ${STATE.allQuestions[STATE.currentLang].length}`);
                } else {
                    throw new Error(`Erreur ${response.status}: ${response.statusText}`);
                }
                
            } catch (error) {
                console.error('Erreur chargement questions:', error);
                STATE.allQuestions[STATE.currentLang] = [];
            }
        }
        
        // CHARGEMENT ET AFFICHAGE DES CAT√âGORIES
        async function loadAndDisplayCategories() {
            await loadQuestions();
            
            const categoriesContainer = document.getElementById('categories-container');
            categoriesContainer.innerHTML = '';
            
            // Cr√©er les cartes de cat√©gories
            CONFIG.CATEGORIES.forEach(category => {
                const translatedCategory = CONFIG.CATEGORY_TRANSLATIONS[STATE.currentLang][category] || category;
                const card = document.createElement('div');
                card.className = 'category-card';
                card.onclick = () => startQuiz(category);
                
                const iconClass = CONFIG.CATEGORY_ICONS[category] || 'fas fa-question';
                
                card.innerHTML = `
                    <div class="category-icon"><i class="${iconClass}"></i></div>
                    <h3>${translatedCategory}</h3>
                `;
                
                categoriesContainer.appendChild(card);
            });
        }
        
        // CHANGEMENT DE LANGUE
        function switchLanguage(lang) {
            STATE.currentLang = lang;
            localStorage.setItem('quizLang', lang);
            updateLanguage();
            loadAndDisplayCategories();
        }
        
        function updateLanguage() {
            const t = CONFIG.LANGUAGES[STATE.currentLang];
            
            // Mettre √† jour tous les textes
            const textElements = [
                { id: 'title', text: t.title },
                { id: 'subtitle', text: t.subtitle },
                { id: 'choose-category', text: t.chooseCategory },
                { id: 'mix-mode', text: t.mixMode },
                { id: 'game-info', text: t.gameInfo },
                { id: 'next-text', text: t.nextText },
                { id: 'results-title', text: t.resultsTitle },
                { id: 'play-again', text: t.playAgain },
                { id: 'home-text', text: t.homeText },
                { id: 'abandon-text', text: t.abandonText },
                { id: 'footer-text', text: t.footerText },
                { id: 'install-text', text: t.installText },
                { id: 'share-score-text', text: t.shareScoreText },
                { id: 'close-donation-text', text: t.closeDonationText },
                { id: 'donation-title', text: t.donationTitle },
                { id: 'donation-subtitle', text: t.donationSubtitle },
                { id: 'donation-item-1', text: t.donationItem1 },
                { id: 'donation-item-2', text: t.donationItem2 },
                { id: 'donation-item-3', text: t.donationItem3 },
                { id: 'donation-item-4', text: t.donationItem4 },
                { id: 'donation-item-5', text: t.donationItem5 },
                { id: 'donation-item-6', text: t.donationItem6 },
                { id: 'donation-conclusion', text: t.donationConclusion },
                { id: 'donation-choose', text: t.donationChoose },
                { id: 'donation-custom', text: t.donationCustom },
                { id: 'donation-info', text: t.donationInfo },
                { id: 'donation-custom-btn', text: t.donationCustomBtn },
                { id: 'donation-title-results', text: t.donationTitleResults },
                { id: 'donation-text-results', text: t.donationTextResults },
                { id: 'donation-custom-results', text: t.donationCustomResults },
                { id: 'donation-info-results', text: t.donationInfoResults },
                { id: 'donation-custom-btn-results', text: t.donationCustomBtn }
            ];
            
            textElements.forEach(item => {
                const element = document.getElementById(item.id);
                if (element) element.textContent = item.text;
            });
            
            // Mettre √† jour le texte du score
            const scoreTextElement = document.getElementById('score-text');
            if (scoreTextElement) {
                const scoreValueElement = document.getElementById('score-value');
                if (scoreValueElement) {
                    scoreTextElement.innerHTML = t.scoreText + '<span id="score-value" style="color: var(--accent); font-weight: bold;">' + STATE.score + '</span>/10';
                }
            }
            
            // Mettre √† jour les boutons de langue
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.lang-btn[onclick*="${STATE.currentLang}"]`).classList.add('active');
            
            // Mettre √† jour le score si on est sur l'√©cran r√©sultats
            if (document.getElementById('results-screen').classList.contains('active')) {
                updatePerformanceMessage();
            }
        }
        
        // D√âMARRER LE QUIZ
        async function startQuiz(category) {
            STATE.currentCategory = category;
            STATE.currentQuestion = 0;
            STATE.score = 0;
            STATE.selectedAnswer = null;
            STATE.quizCompleted = false;
            STATE.autoNextTimeout = null;
            
            // V√©rifier si les questions sont charg√©es
            if (STATE.allQuestions[STATE.currentLang].length === 0) {
                await loadQuestions();
            }
            
            // Filtrer les questions par cat√©gorie
            let filteredQuestions = STATE.allQuestions[STATE.currentLang];
            
            if (category !== 'mix') {
                filteredQuestions = filteredQuestions.filter(q => q.category === category);
            }
            
            if (filteredQuestions.length === 0) {
                alert(STATE.currentLang === 'fr' 
                    ? `Aucune question disponible pour la cat√©gorie "${category}". Veuillez s√©lectionner une autre cat√©gorie.`
                    : `No questions available for category "${category}". Please select another category.`);
                return;
            }
            
            // M√©langer et s√©lectionner 10 questions
            const shuffled = shuffleArray([...filteredQuestions]);
            STATE.questions = shuffled.slice(0, CONFIG.QUESTIONS_PER_QUIZ);
            
            // M√©langer les r√©ponses pour chaque question
            STATE.questions.forEach(question => {
                const originalAnswers = [...question.answers];
                const shuffledAnswers = [...originalAnswers];
                
                for (let i = shuffledAnswers.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffledAnswers[i], shuffledAnswers[j]] = [shuffledAnswers[j], shuffledAnswers[i]];
                }
                
                question.answers = shuffledAnswers;
            });
            
            // Afficher l'√©cran quiz
            showScreen('quiz-screen');
            showQuestion();
            startTimer();
        }
        
        // AFFICHER QUESTION
        function showQuestion() {
            const question = STATE.questions[STATE.currentQuestion];
            if (!question) return;
            
            const t = CONFIG.LANGUAGES[STATE.currentLang];
            
            // Mettre √† jour le compteur
            document.getElementById('question-counter').textContent = 
                `${STATE.currentLang === 'fr' ? 'Question' : 'Question'} ${STATE.currentQuestion + 1}/${STATE.questions.length}`;
            
            // Mettre √† jour la progression
            const progress = ((STATE.currentQuestion + 1) / STATE.questions.length) * 100;
            document.getElementById('progress-fill').style.width = `${progress}%`;
            
            // Mettre √† jour la cat√©gorie
            let categoryName;
            if (STATE.currentCategory === 'mix') {
                categoryName = t.mixMode;
            } else {
                categoryName = CONFIG.CATEGORY_TRANSLATIONS[STATE.currentLang][STATE.currentCategory] || STATE.currentCategory;
            }
            document.getElementById('category-display').textContent = categoryName;
            
            // Afficher la question
            document.getElementById('question-text').textContent = question.text;
            
            // G√©n√©rer les r√©ponses
            const container = document.getElementById('answers-container');
            container.innerHTML = '';
            
            const letters = ['A', 'B', 'C', 'D'];
            question.answers.forEach((answer, index) => {
                const btn = document.createElement('button');
                btn.className = 'answer-btn';
                btn.innerHTML = `
                    <span class="answer-letter">${letters[index]}</span>
                    <span style="flex: 1;">${answer}</span>
                `;
                btn.onclick = () => selectAnswer(index);
                container.appendChild(btn);
            });
            
            // R√©initialiser
            document.getElementById('next-btn').disabled = true;
            STATE.selectedAnswer = null;
            resetTimer();
        }
        
        // S√âLECTIONNER R√âPONSE
        function selectAnswer(index) {
            if (STATE.selectedAnswer !== null) return;
            
            STATE.selectedAnswer = index;
            const question = STATE.questions[STATE.currentQuestion];
            const buttons = document.querySelectorAll('.answer-btn');
            
            // D√©sactiver tous les boutons
            buttons.forEach(btn => btn.style.pointerEvents = 'none');
            
            // V√©rifier la r√©ponse
            const isCorrect = question.answers[index] === question.correct;
            buttons[index].classList.add(isCorrect ? 'correct' : 'wrong');
            
            // Marquer la bonne r√©ponse si incorrect
            if (!isCorrect) {
                const correctIndex = question.answers.findIndex(a => a === question.correct);
                if (correctIndex !== -1) {
                    buttons[correctIndex].classList.add('correct');
                }
            }
            
            // Mettre √† jour le score
            if (isCorrect) {
                STATE.score++;
                console.log(`Score mis √† jour: ${STATE.score}/10 (Question ${STATE.currentQuestion + 1})`);
            }
            
            // Activer le bouton suivant
            document.getElementById('next-btn').disabled = false;
            clearInterval(STATE.timer);
            
            // Annuler le timeout automatique pr√©c√©dent
            if (STATE.autoNextTimeout) {
                clearTimeout(STATE.autoNextTimeout);
                STATE.autoNextTimeout = null;
            }
            
            // Planifier le passage automatique apr√®s 1 seconde
            STATE.autoNextTimeout = setTimeout(() => {
                if (!STATE.quizCompleted) {
                    nextQuestion();
                }
            }, CONFIG.AUTO_NEXT_DELAY);
        }
        
        // TIMER
        function startTimer() {
            resetTimer();
            STATE.timeLeft = CONFIG.TIMER_DURATION;
            updateTimerDisplay();
            
            STATE.timer = setInterval(() => {
                STATE.timeLeft--;
                updateTimerDisplay();
                
                if (STATE.timeLeft <= 0) {
                    clearInterval(STATE.timer);
                    handleTimeUp();
                }
            }, 1000);
        }
        
        function resetTimer() {
            clearInterval(STATE.timer);
            STATE.timeLeft = CONFIG.TIMER_DURATION;
            updateTimerDisplay();
        }
        
        function handleTimeUp() {
            if (STATE.selectedAnswer !== null) return;
            
            const question = STATE.questions[STATE.currentQuestion];
            const buttons = document.querySelectorAll('.answer-btn');
            const correctIndex = question.answers.findIndex(a => a === question.correct);
            
            if (correctIndex !== -1) {
                buttons[correctIndex].classList.add('correct');
            }
            
            // D√©sactiver tous les boutons
            buttons.forEach(btn => btn.style.pointerEvents = 'none');
            
            document.getElementById('next-btn').disabled = false;
            
            // Annuler le timeout automatique pr√©c√©dent
            if (STATE.autoNextTimeout) {
                clearTimeout(STATE.autoNextTimeout);
                STATE.autoNextTimeout = null;
            }
            
            // Planifier le passage automatique apr√®s 1.5 seconde
            STATE.autoNextTimeout = setTimeout(() => {
                if (!STATE.quizCompleted) {
                    nextQuestion();
                }
            }, 1500);
        }
        
        // QUESTION SUIVANTE
        function nextQuestion() {
            // Annuler le timeout automatique s'il existe
            if (STATE.autoNextTimeout) {
                clearTimeout(STATE.autoNextTimeout);
                STATE.autoNextTimeout = null;
            }
            
            // Si aucune r√©ponse n'a √©t√© s√©lectionn√©e (cas du bouton suivant activ√© par le temps √©coul√© sans r√©ponse)
            if (STATE.selectedAnswer === null) {
                const question = STATE.questions[STATE.currentQuestion];
                const buttons = document.querySelectorAll('.answer-btn');
                const correctIndex = question.answers.findIndex(a => a === question.correct);
                
                if (correctIndex !== -1) {
                    buttons[correctIndex].classList.add('correct');
                }
                
                // D√©sactiver tous les boutons
                buttons.forEach(btn => btn.style.pointerEvents = 'none');
            }
            
            // Passer √† la question suivante imm√©diatement
            STATE.currentQuestion++;
            
            if (STATE.currentQuestion < STATE.questions.length) {
                showQuestion();
                startTimer();
            } else {
                finishQuiz();
            }
            
            // D√©sactiver le bouton suivant
            document.getElementById('next-btn').disabled = true;
            STATE.selectedAnswer = null;
        }
        
        // TERMINER QUIZ
        function finishQuiz() {
            STATE.quizCompleted = true;
            showResults();
        }
        
        // AFFICHER R√âSULTATS
        function showResults() {
            showScreen('results-screen');
            
            const percentage = Math.round((STATE.score / STATE.questions.length) * 100);
            document.getElementById('score-percent').textContent = `${percentage}%`;
            
            // CORRECTION ICI : Mettre √† jour correctement le score
            const t = CONFIG.LANGUAGES[STATE.currentLang];
            const scoreTextElement = document.getElementById('score-text');
            const scoreValueElement = document.getElementById('score-value');
            
            if (scoreTextElement && scoreValueElement) {
                scoreValueElement.textContent = STATE.score;
                // Reconstruire le texte du score
                scoreTextElement.innerHTML = t.scoreText + '<span id="score-value" style="color: var(--accent); font-weight: bold;">' + STATE.score + '</span>/10';
            }
            
            // Animer le cercle de score
            const circle = document.querySelector('.score-circle');
            circle.style.background = `conic-gradient(#2ecc71 0% ${percentage}%, rgba(255,255,255,0.1) ${percentage}% 100%)`;
            
            // Message de performance
            updatePerformanceMessage();
            
            // R√©initialiser le champ de don personnalis√©
            document.getElementById('custom-amount-results').value = '';
            
            console.log(`Quiz termin√©! Score final: ${STATE.score}/10`);
        }
        
        function updatePerformanceMessage() {
            const t = CONFIG.LANGUAGES[STATE.currentLang];
            const messageElement = document.getElementById('performance-message');
            
            if (messageElement) {
                const messageObj = t.performanceMessages.find(m => 
                    STATE.score >= m.min && STATE.score <= m.max
                );
                
                if (messageObj) {
                    messageElement.textContent = messageObj.message;
                }
            }
        }
        
        // NAVIGATION
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
            window.scrollTo(0, 0);
        }
        
        function goHome() {
            // Annuler le timer et les timeouts
            clearInterval(STATE.timer);
            if (STATE.autoNextTimeout) {
                clearTimeout(STATE.autoNextTimeout);
                STATE.autoNextTimeout = null;
            }
            
            showScreen('home-screen');
        }
        
        function playAgain() {
            if (STATE.currentCategory) {
                startQuiz(STATE.currentCategory);
            } else {
                goHome();
            }
        }
        
        // PARTAGE DE SCORE
        function shareScore() {
            const t = CONFIG.LANGUAGES[STATE.currentLang];
            const shareData = {
                title: t.title,
                text: `üéâ J'ai obtenu ${STATE.score}/10 au Quiz Culture Africaine !\nüåç Testez vos connaissances sur la culture africaine !\n\nüëâ Jouez maintenant : `,
                url: window.location.href
            };
            
            if (navigator.share) {
                navigator.share(shareData)
                    .then(() => console.log('Score partag√© avec succ√®s'))
                    .catch(error => console.log('Erreur de partage:', error));
            } else {
                // Fallback pour les navigateurs sans API Share
                const shareText = `${shareData.text} ${shareData.url}`;
                const textArea = document.createElement('textarea');
                textArea.value = shareText;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                alert(t.shareScoreText + ' copi√© dans le presse-papiers !');
            }
        }
        
        // DONATIONS - FedaPay
        function showDonations() {
            document.getElementById('donation-modal').classList.add('active');
        }
        
        function closeDonationModal() {
            document.getElementById('donation-modal').classList.remove('active');
            document.getElementById('custom-amount').value = '';
        }
        
        function initiateDonation(amount) {
            const t = CONFIG.LANGUAGES[STATE.currentLang];
            
            // Afficher un message avant le paiement
            alert(t.donateText + ` de ${amount} F CFA - Configurez vos cl√©s FedaPay en mode live dans le code.`);
            
            // √Ä configurer avec vos cl√©s FedaPay en mode live
            // Remplacer les valeurs par vos vraies cl√©s
            const fedapayConfig = {
                public_key: 'YOUR_FEDAPAY_LIVE_PUBLIC_KEY', // √Ä configurer
                transaction: {
                    amount: amount,
                    currency: 'XOF',
                    description: 'Don pour Quiz Culture Africaine',
                    callback_url: window.location.href,
                    customer: {
                        email: 'donateur@example.com',
                        lastname: 'Donateur',
                        firstname: 'Quiz'
                    }
                }
            };
            
            // Charger le SDK FedaPay
            loadFedaPaySDK(amount);
        }
        
        function initiateCustomDonation() {
            const customAmountInput = document.getElementById('custom-amount');
            const amount = parseInt(customAmountInput.value);
            
            if (!amount || amount < 100 || amount > 1000000) {
                const t = CONFIG.LANGUAGES[STATE.currentLang];
                alert(t.donateText + ' : Montant invalide. Minimum 100 F CFA, maximum 1 000 000 F CFA.');
                return;
            }
            
            initiateDonation(amount);
        }
        
        function initiateCustomDonationResults() {
            const customAmountInput = document.getElementById('custom-amount-results');
            const amount = parseInt(customAmountInput.value);
            
            if (!amount || amount < 100 || amount > 1000000) {
                const t = CONFIG.LANGUAGES[STATE.currentLang];
                alert(t.donateText + ' : Montant invalide. Minimum 100 F CFA, maximum 1 000 000 F CFA.');
                return;
            }
            
            initiateDonation(amount);
        }
        
        function loadFedaPaySDK(amount) {
            // Cette fonction charge le SDK FedaPay
            // √Ä impl√©menter avec vos vraies cl√©s
            console.log(`Initialisation du paiement FedaPay pour ${amount} F CFA`);
            
            // Pour l'instant, afficher un message
            const t = CONFIG.LANGUAGES[STATE.currentLang];
            alert(`${t.donateText} de ${amount} F CFA - Pour activer les paiements, configurez vos cl√©s FedaPay en mode live dans le code JavaScript.`);
            closeDonationModal();
        }
        
        // FONCTIONS DE PARTAGE
        function shareApp() {
            const t = CONFIG.LANGUAGES[STATE.currentLang];
            const shareData = {
                title: t.title,
                text: t.subtitle,
                url: window.location.href
            };
            
            if (navigator.share) {
                navigator.share(shareData)
                    .then(() => console.log('Partage r√©ussi'))
                    .catch(error => console.log('Erreur de partage:', error));
            } else {
                prompt(t.shareText + " - Copiez ce lien:", window.location.href);
            }
        }
        
        // PWA - INSTALLATION DIRECTE
        function installPWA() {
            if (STATE.deferredPrompt) {
                STATE.deferredPrompt.prompt();
                
                STATE.deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('Utilisateur a accept√© l\'installation');
                        document.getElementById('install-btn').style.display = 'none';
                        
                        const t = CONFIG.LANGUAGES[STATE.currentLang];
                        setTimeout(() => {
                            alert(t.installText + ' install√©e avec succ√®s! L\'application est maintenant disponible sur votre √©cran d\'accueil.');
                        }, 500);
                    } else {
                        console.log('Utilisateur a refus√© l\'installation');
                        showInstallInstructions();
                    }
                    
                    STATE.deferredPrompt = null;
                });
            } else {
                showInstallInstructions();
            }
        }
        
        function showInstallInstructions() {
            const t = CONFIG.LANGUAGES[STATE.currentLang];
            const instructions = t.currentLang === 'fr' 
                ? "Pour installer l'application :\n\n" +
                  "üì± Sur Mobile (Android/Chrome) :\n" +
                  "1. Appuyez sur ‚ãÆ (menu)\n" +
                  "2. S√©lectionnez 'Ajouter √† l'√©cran d'accueil'\n" +
                  "3. Confirmez l'installation\n\n" +
                  "üçé Sur iPhone/iPad (Safari) :\n" +
                  "1. Appuyez sur ‚¨ÜÔ∏è (partager)\n" +
                  "2. Faites d√©filer et s√©lectionnez 'Sur l'√©cran d'accueil'\n" +
                  "3. Appuyez sur 'Ajouter'"
                : "To install the app:\n\n" +
                  "üì± On Mobile (Android/Chrome):\n" +
                  "1. Tap ‚ãÆ (menu)\n" +
                  "2. Select 'Add to Home Screen'\n" +
                  "3. Confirm installation\n\n" +
                  "üçé On iPhone/iPad (Safari):\n" +
                  "1. Tap ‚¨ÜÔ∏è (share)\n" +
                  "2. Scroll and select 'Add to Home Screen'\n" +
                  "3. Tap 'Add'";
            
            alert(instructions);
        }
        
        // INITIALISATION
        async function init() {
            STATE.currentLang = localStorage.getItem('quizLang') || 'fr';
            
            updateLanguage();
            await loadAndDisplayCategories();
            
            // PWA - Gestion de l'installation
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                STATE.deferredPrompt = e;
                document.getElementById('install-btn').style.display = 'block';
                console.log('PWA peut √™tre install√©e');
            });
            
            window.addEventListener('appinstalled', (e) => {
                console.log('App install√©e');
                document.getElementById('install-btn').style.display = 'none';
                STATE.deferredPrompt = null;
            });
            
            if (window.matchMedia('(display-mode: standalone)').matches) {
                document.getElementById('install-btn').style.display = 'none';
            }
            
            // Fermer la modal en cliquant en dehors
            document.getElementById('donation-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeDonationModal();
                }
            });
        }
        
        window.onload = init;
    </script>
    
    <!-- Service Worker Inline -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                const swContent = `
                    const CACHE_NAME = 'quiz-culture-africaine-v8';
                    const urlsToCache = [
                        './',
                        './questions-fr.json',
                        './questions-eng.json'
                    ];

                    self.addEventListener('install', event => {
                        event.waitUntil(
                            caches.open(CACHE_NAME)
                                .then(cache => cache.addAll(urlsToCache))
                        );
                    });

                    self.addEventListener('fetch', event => {
                        event.respondWith(
                            caches.match(event.request)
                                .then(response => response || fetch(event.request))
                        );
                    });

                    self.addEventListener('activate', event => {
                        event.waitUntil(
                            caches.keys().then(cacheNames => {
                                return Promise.all(
                                    cacheNames.map(cacheName => {
                                        if (cacheName !== CACHE_NAME) {
                                            return caches.delete(cacheName);
                                        }
                                    })
                                );
                            })
                        );
                    });
                `;
                
                const blob = new Blob([swContent], { type: 'application/javascript' });
                const swURL = URL.createObjectURL(blob);
                
                navigator.serviceWorker.register(swURL)
                    .then(registration => {
                        console.log('Service Worker enregistr√© avec succ√®s:', registration);
                    })
                    .catch(error => {
                        console.log('√âchec enregistrement Service Worker:', error);
                    });
            });
        }
    </script>
    
    <!-- Manifest Inline -->
    <script type="application/manifest+json">
        {
            "name": "Quiz Culture Africaine",
            "short_name": "QuizAfrique",
            "description": "Testez vos connaissances sur la culture africaine",
            "start_url": ".",
            "display": "standalone",
            "background_color": "#1d3557",
            "theme_color": "#1d3557",
            "icons": [
                {
                    "src": "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üåç</text></svg>",
                    "sizes": "any",
                    "type": "image/svg+xml"
                }
            ]
        }
    </script>
</body>
</html>